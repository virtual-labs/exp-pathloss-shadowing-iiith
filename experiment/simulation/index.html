<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="css/main.css">
	<title>Pathloss Simulation</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/virtual-labs/virtual-style@0.0.8-b/css/style.min.css">
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
	<div id="notification" class="notification"></div>
	<div class="columns is-centered">
		<div class="column is-one-quarter v-instruction-title">
			Tasks
		</div>
		<div class="column">
			<div class="tab">
				<button class="tablinks" onclick="openPart(event, 'task1')" , id="default">Pathloss</button>
				<!-- <button class="tablinks" onclick="openPart(event, 'task2')">shadowing</button>/ -->
				<button class="tablinks" onclick="openPart(event, 'task3')">Pathloss and Shadowing</button>
			</div>
		</div>
	</div>

	<div id="task1" class="tabcontent">
		<section class="fre" id="TASK1">
			<div class="max-width">
				<h2 class="title">Pathloss</h2>
				<div class="columns is-centered">
					<div class="v-collapsible-instruction-container v-instruction-container" style="margin-top: 2%;">
						<div class="v-collapsible is-size-5">Instructions</div>
						<div class="v-content" style="text-align: left; padding-left: 10%; padding-right: 10%;">
							<h3> <b> To understand the effect of various parameters on pathloss, please follow the following steps: </b> </h3>
							<br>
							<h3>
								<ol>
									<li>Enter the Antenna gain G, Carrier frequency f<sub>c</sub>, Height of the transmitter H<sub>t</sub>, Height of the receiver H<sub>r</sub>. </li>
									<li>Start adjusting the position of the receiver by moving the slider.</li>
									<li>Click on register to plot the pathloss at the given distance.</li>
									<li>You can register pathloss for different distances and heights of antenna and observe the graph to understand the pathloss trends.</li>
								</ol>
							</h3>
							<br>
						</div>
					</div>
				</div>
				<div class="columns-container">
					<div class="left-column box">
						<div class="form-group">
							<label for="G"><b>G (dB)</b></label>
							<input type="number" id="G" class="form-control" value="0">
						</div>
						
						<div class="form-group">
							<label for="fc"><b>f<sub>c</sub> (150-1500 MHz)</b></label>
							<input type="number" id="fc" step="1" class="form-control" min="150" max="1500" value="900">
						</div>
						
						<div class="form-group">
							<label for="tx-height"><b>H<sub>t</sub> (30-1000 meters)</b></label>
							<input type="number" id="tx-height" min="30" max="1000" value="100" step="1" class="form-control">
						</div>
						
						<div class="form-group">
							<label for="rx-height"><b>H<sub>r</sub> (1-10 meters)</b></label>
							<input type="number" id="rx-height" min="1" max="10" value="3" step="1" class="form-control">
						</div>
					</div>
					<div class="center-column box">
						<div id="experiment-area">
								<div id="transmitter" class="antenna">
										<img src="./images/antenna-small.svg" alt="Transmitter antenna" draggable="false">
								</div>
								<div id="receiver" class="antenna">
										<img src="./images/antenna-small.svg" alt="Receiver antenna" draggable="false">
								</div>
						</div>         
						<div class="input-group">
							<label for="distance-slider" style="font-weight: bold; font-size: 1.2em; margin-bottom: 10px;">Adjust Receiver Position (1-100 km)</label>
							<input type="range" id="distance-slider" min="1" max="100" value="1" step="1" style="width: 100%; height: 10px; background: linear-gradient(to right, #4caf50, #8bc34a); border-radius: 5px; outline: none;">
							<div id="button-container" style="margin-top: 20px; display: flex; justify-content: center;">
									<button id="register-btn" style="margin-right: 10px; padding: 10px 20px; background-color: #4caf50; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1em;">Register</button>
									<button id="resetBtn" style="padding: 10px 20px; background-color: #f44336; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1em;">Reset</button>
							</div>
						</div>			
					</div>
					
					<div class="right-column box">
						<div class="column is-3-desktop is-10-tablet is-5-mobile">
							<div class="box-question">
								<div class="bold-text"><b>Observations</b></div>
                                 <br>
									<div class="metrics">
										<div class="metric-card" >
											<div class="metric-value"><span id="distance">0</span> m</div>
											<div class="metric-label">Distance</div>
										</div>
										<div class="metric-card">
											<div class="metric-value"><span id="path-loss">0</span> dB</div>
											<div class="metric-label">Path Loss</div>
										</div>
									</div>
								
							
							</div>
						</div>
					</div>
				</div>
				
				<!-- Graph Section -->
				<canvas id="pathloss-chart" style="max-height: 450px;"></canvas>
			</div>
		   
		</section>
	
	 </div>

	 <div id="task1" class="tabcontent">
		<section class="fre" id="TASK2">
			<div class="max-width">
				<h2 class="title">shadowing</h2>
				<div class="columns is-centered">
					<div class="v-collapsible-instruction-container v-instruction-container" style="margin-top: 2%;">
						<div class="v-collapsible is-size-5">Instructions</div>
						<div class="v-content" style="text-align: left; padding-left: 10%; padding-right: 10%;">
							<h3> <b>To understand the effect of obstacles   on the signal power, follow the following steps: </b> </h3>
							<br>
							<h3>
								<ol>
									<li> Imagine that there is a transmitter located at the center of the simulation area. </li>
									<li> Place obstacles: To begin, click on any location within the simulation area. By clicking, an obstacle will be generated at the selected location. </li>
									<li> After placing an obstacle, you will notice that the area behind the obstacle becomes reddish. This color change represents the decrease in signal strength due to the obstruction. The reddish areas indicate regions where the signal coverage is weak, meaning the radio waves are blocked or reflected by the obstacle, causing shadowing. </li>
									<li> As you place more obstacles throughout the simulation area, you will notice that the blue areas become smaller and the red areas expand. This indicates that the signal coverage is being increasingly degraded as more obstacles are introduced.</li>
								</ol>
							</h3>
							<br>
						</div>
					</div>
				</div>
				<div class="columns-container">
					<div class="left-column box">
						<div class="columns is-centered is-flex-direction-row is-flex-wrap-wrap is-align-content-start"
							style="margin-top:-1.5%">
							<div class="column is-2-desktop is-4-tablet is-10-mobile">
								<div class="box-question">
									<div class="fill1">
										<label for="G"><b>G (dB)</b></label>
										<input type="number" id="G">
									</div>
									<div class="fill1">
										f<sub>c</sub> (in MHz) <input type="number" id="fc" step="0.1">
									</div>
									<div class="fill1">
										<label for="tx-height">H<sub>t</sub> (meters)</label>
										<input type="number" id="tx-height" min="1" max="150" value="10" step="1">
									</div>
									<div class="fill1">
										<label for="rx-height">H<sub>r</sub> (meters)</label>
										<input type="number" id="rx-height" min="1" max="150" value="10" step="1">
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="center-column box">
						<div class="container">
						  <div class="main-content">
								<div id="experiment-area">
										<div id="transmitter" class="antenna">
												<img src="./images/antenna-small.svg" alt="Transmitter antenna" draggable="false">
										</div>
										<div id="receiver" class="antenna">
												<img src="./images/antenna-small.svg" alt="Receiver antenna" draggable="false">
										</div>
								</div>
								<div class="input-group">
										<label for="distance-slider">Adjust Receiver Position</label>
										<input type="range" id="distance-slider" min="0" max="100" value="0" step="1">
										<div id="button-container" style="margin-top: 10px; display: flex; justify-content: center;">
												<button id="register-btn" style="margin-right: 10px;">Register</button>
												<button id="resetBtn">Reset</button>
										</div>
								</div>            
						</div>
						
						</div>
					</div>
					
					<div class="right-column box">
						<div class="column is-3-desktop is-10-tablet is-5-mobile">
							<div class="box-question">
								<div class="bold-text">Observations</div>
								<div class="sidebar">
									<div class="metrics">
										<div class="metric-card">
											<div class="metric-value"><span id="distance">0</span> m</div>
											<div class="metric-label">Distance</div>
										</div>
										<div class="metric-card">
											<div class="metric-value"><span id="path-loss">0</span> dB</div>
											<div class="metric-label">Path Loss</div>
										</div>
									</div>
								</div>
								<div id="observations">
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="container">
					<div class="input-group">
						<h2>Registered Values</h2>
						<table id="values-table" border="1" style="width: 100%; ">
							<thead>
								<tr>
									<th>Distance (km)</th>
									<th>Path Loss (dB)</th>
								</tr>
							</thead>
							<tbody>
								<!-- Values will be dynamically added here -->
							</tbody>
						</table>
					</div>
				<!-- Graph Section -->
				<canvas id="pathloss-chart" style="max-height: 450px;"></canvas>
				</div>
			</div>
		   
		</section>
	
	 </div>

    <div id="task3" class="tabcontent">
        <section class="fre" id="TASK3">
            <div class="max-width">
                <h2 class="title">Pathloss and Shadowing</h2>
                <div class="columns is-centered">
                    <div class="v-collapsible-instruction-container v-instruction-container" style="margin-top: 2%;">
                        <div class="v-collapsible is-size-5">Instructions</div>
                        <div class="v-content" style="text-align: left; padding-left: 10%; padding-right: 10%;">
                            <h3> <b> To understand the effect of obstacles on the signal power, follow the following steps: </b> </h3>
                            <br>
                            <h3>
                                <ol>
                                    <li> Assume that the transmitter is located in the centre. </li>
				    <li> Click on any location in the simulation area to generate an obstacle. </li>
				    <li> Observe that the area behind the obstacle becomes reddish. This is due to the fact that the signal strength decreases. </li>
				    <li> Note that blue areas indicate good signal and red once indicate bad signal.As you start placing more obstacles, it starts to become darker.</li>
                                </ol>
                            </h3>
                            <br>
                        </div>
                    </div>
                </div>
                <div class="columns-container">
                    <div class="left-column3 box">
                        <div class="columns is-centered is-flex-direction-row is-flex-wrap-wrap is-align-content-start" style="margin-top: 1.5%;">
						
       
                <h3>Control Panel</h3>
								<div class="panel-content">
						
											<div class="section-title">System Parameters</div>
											<div class="input-group">
													<label for="k_val">Pathloss at Reference Distance (K, dB)</label>
													<input type="number" id="k_val" value="31.54" step="0.1">
											</div>
											<div class="input-group">
													<label for="gamma_val">Pathloss Exponent (γ)</label>
													<input type="number" id="gamma_val" value="3.71" step="0.01">
											</div>
											<div class="input-group">
													<label for="d0_val">Reference Distance (d₀, km)</label>
													<input type="number" id="d0_val" value="0.01" step="0.001" min="0.001">
											</div>
											<div class="input-group">
													<label for="obstacle_density_val">Obstacle Density (per km²)</label>
													<input type="number" id="obstacle_density_val" value="500" step="10" min="0">
											</div>
							
	
											<div class="section-title">Receiver Position</div>
											<div class="slider-container">
													<div class="slider-label">
															<span>Distance from Transmitter (km)</span>
															<span id="current_distance_val" class="value-display">2.50</span>
													</div>
													<input type="range" id="current_distance_slider" min="0.02" max="5.0" value="2.5" step="0.05">
											</div>
											<div class="slider-container">
													<div class="slider-label">
															<span>Receiver Angle (degrees)</span>
															<span id="receiver_angle_val" class="value-display">0</span>
													</div>
													<input type="range" id="receiver_angle_slider" min="0" max="360" value="0" step="1">
											</div>
							
	
							
											<div class="section-title">Data Recording</div>
											<div class="recording-info">
													<p>Recorded Points: <span id="record_count_display">0 / 50</span></p>
											</div>
											<div class="button-group">
												<button id="record_data_btn">Record Point</button>
												<button id="auto_generate_btn">Auto-Generate Points</button>
											</div>
											<div class="button-group">
												<button id="randomize_obstacles_btn">New Environment</button>
												<button id="reset_session_btn">Reset Session</button>
											</div>
								
							</div>
     
                        </div>
                    </div>
                    <div class="center-column3 box">
											<h3>Simulation</h3>
											<div class="simulation-container">
												<canvas id="simulationCanvas" width="420" height="420"></canvas>
												
												<div class="simulation-legend">
														<div class="legend-item">
																<img class="legend-icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzY2N2VlYSI+PHBhdGggZD0iTTEyIDNsNCA0aC0zdjEwaC0yVjdIOFs0LTR6TTQgOWgzdjJINGMtMnptMCA0aDN2Mkg0di0yem0xNi00aC0zdjJoM3YtMnptMCA0aC0zdjJoM3YtMnoiLz48L3N2Zz4=">
																<span>Transmitter</span>
														</div>
														<div class="legend-item">
																<img class="legend-icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzY2N2VlYSI+PHBhdGggZD0iTTE2IDFIOEM2LjM0IDEgNSAyLjM0IDUgNHYxNmMwIDEuNjYgMS4zNCAzIDMgM2g4YzEuNjYgMCAzLTEuMzQgMy0zVjRjMC0xLjY2LTEuMzQtMy0zLTN6TTE0IDIxaC00di0xaDR2MXptMS4yNS0zSDguNzVWNGg2LjV2MTR6Ii8+PC9zdmc+">
																<span>Receiver</span>
														</div>
														<div class="legend-item"><span class="legend-swatch obstacle-color"></span><span>Obstacle</span></div>
														<div class="legend-item"><span class="legend-line los-color"></span><span>LoS Signal</span></div>
														<div class="legend-item"><span class="legend-line occluded-color"></span><span>Occluded</span></div>
												</div>
												
												<div class="status-display">
														<p><strong>Signal Status:</strong> <span id="status_indicator" class="status-indicator status-los"></span><span id="out_status">Line of Sight</span></p>
														<p><strong>Total Pathloss:</strong> <span id="out_total_pl_val">0</span> dB</p>
														<p><strong>Pr/Pt at Receiver:</strong> <span id="out_pr_pt_val">0</span> dB</p>
												</div>
										</div>
                       
                    </div>
                    <div class="right-column3 box">
                        <div class="column is-3-desktop is-10-tablet is-5-mobile">
													<h3>Results</h3>
												
													<div class="graph-container">
														<div id="graph_placeholder">Record at least one data point to generate the analysis graph</div>
														<canvas id="pathlossGraph" style="display: none;"></canvas>
												</div>
											
											
                            </div>
                        </div>
                    </div>
                </div>
                </section>
            </div>
	<script src="./js/main.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/virtual-labs/virtual-style@0.0.8-b/js/script.js"></script>

</body>

</html>
